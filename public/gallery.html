<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>{gallery}</title>
  <link href="https://cdn.jsdelivr.net/npm/nanogallery2@3/dist/css/nanogallery2.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lexend Deca" rel="stylesheet" type="text/css">
  <style>
    body {
      font-family: "Lexend Deca";
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nanogallery2@3/dist/jquery.nanogallery2.min.js"></script>
  <script>
    var globalDefaults = {
      galleryFilterTags: true,
      galleryFilterTagsMode: "multiple",

      locationHash: true,

      thumbnailDisplayTransition: "slideDown",
      thumbnailLabel: {
        display: true,
        position: "onBottomOverImage",
        titleFontSize: "0.8em",
      },
      thumbnailHeight: "auto",
      thumbnailWidth: "auto",

      viewerToolbar: {
        display: true,
        minimized: "label",
        standard: "label",
      },
      viewerTools: {
        //topLeft: "label,description",
        topRight: "rotateLeft,rotateRight,fullscreenButton,closeButton",
      },
    };

    console.log('%cHey there! You come here often? ðŸ˜‰', 'font-size: 24px; font-weight: bold;');
    $(document).ready(function () {
      var p = new URLSearchParams(window.location.search);
      var f = p.get('from');

      if (f === null || f === undefined) {
        return;
      }

      var m = f.endsWith('/manifest.json') ? f : f + "/manifest.json";
      var baseURL = f.endsWith('/manifest.json') ? f.replace(/\/manifest\.json$/, '/') : f + "/";
      var galleryDefaults = {
        itemsBaseURL: baseURL,
      };

      $("#preamble").html("Loading...");
      $.getJSON(m, function(payload) {
        $("#preamble").html("");
        $("#gallery").nanogallery2($.extend({}, globalDefaults, galleryDefaults, payload));
      }).fail(function(xhr, status, error) {
        $("#gallery").html("Error: " + error + "<br>URL: " + m + "<br>" + JSON.stringify(xhr));
      });

      return true;
    });
  </script>
</head>
<body translate="no">
  <span id="preamble">
    <form action="/gallery.html" method="GET">
      <label for="from">Base URL:</label>
      <input type="text" id="from" name="from" value="" size="100">
      <input type="submit" value="Load">
    </form>
  </span>
  <div id="gallery"></div>
</body>
</html>
